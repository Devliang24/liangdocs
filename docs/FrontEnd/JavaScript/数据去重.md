
> 去重的核心：要根据实际业务怎么定义'重'


## 对象数组去重

**基本思路**：

1. 首先判断两个值的类型是否相同，如果不同，则返回 `false`；
2. 处理特殊情况 `null、undefined、Date、function`；
3. 处理数组类型，对比项的数量，再递归对比每个项是否相等；
4. 处理朴素对象，对比键的数量，相等则再递归对比值是否相等。


```javascript
function compareObjects(obj1, obj2) {
  const equalType = (val1,val2) => Object.prototype.toString.call(val1)!== Object.prototype.toString.call(val2)
  // 判断类型是否一致
  if (equalType(obj1,obj2)) {
    return false;
  }

  // 判断 null 和 undefined:只要有一个为 null 或 undefined，则直接比较值
  if (obj1 === null || obj2 === null || obj1 === undefined || obj2 === undefined) {
    return obj1 === obj2;
  }

  // 判断基本类型是否相等
  if (typeof obj1 === 'number' || typeof obj1 === 'string' || typeof obj1 === 'boolean') {
    return obj1 === obj2;
  }
  if (typeof obj1 === "function" && typeof obj2 === "function") return obj1.toString() === obj2.toString();

  if (obj1 instanceof Date && obj2 instanceof Date) return obj1.getTime() === obj2.getTime();

  // 判断数组是否相等
  if (Array.isArray(obj1)) {
    if (!Array.isArray(obj2) || obj1.length !== obj2.length) {
      return false;
    }
   return obj1.every((item,index) => compareObjects(item, obj2[index]) )
    // for (let i = 0; i < obj1.length; i++) {
    //   if (!compareObjects(obj1[i], obj2[i])) {
    //     return false;
    //   }
    // }
    // return true;
  }
  //比较对象是否相等
  const keys1 = Object.keys(obj1);
  const keys2 = Object.keys(obj2);
  if (keys1.length !== keys2.length) {
    return false;
  }
  for (const key of keys1) {
    if (!compareObjects(obj1[key], obj2[key])) {
      return false;
    }
  }
  return true;
}
```

**测试示例**：
```js
// 示例
const obj1 = {
  name: 'Tom',
  age: 18,
  hobby: ['reading', 'music'],
  address: {
    province: 'Guangdong',
    city: 'Shenzhen',
    detail: {
      street: 'Xinxi Road',
      number: 888
    },
    date:new Date('2022-02-13'),
    func:function(){
      console.log(1)
    }
  }
};
const obj2 = {
  name: 'Tom',
  age: 18,
  hobby: ['reading', 'music'],
  address: {
    province: 'Guangdong',
    city: 'Shenzhen',
    detail: {
      street: 'Xinxi Road',
      number: 888
    },
    date:new Date('2022-02-13'),
    func:function(){
      console.log(1)
    }
  }
};
const obj3 = {
  name: 'Tom',
  age: 18,
  hobby: ['reading', 'music','dance'],
  address: {
    province: 'Guangdong',
    city: 'Shenzhen',
    detail: {
      street: 'Xinxi Road',
      number: 888
    },
    //date:new Date('2022-02-13'),
    // func:function(){
    //  console.log(1)
    //}
  }
};
compareObjects(obj1, obj2) // true
compareObjects(obj1, obj3) // false
compareObjects(undefined, null)// false
compareObjects(null, null)
```